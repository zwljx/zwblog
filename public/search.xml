<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>TestNG-生成自定义格式的报告</title>
      <link href="/2021/10/25/TestNG-Report/"/>
      <url>/2021/10/25/TestNG-Report/</url>
      
        <content type="html"><![CDATA[<h3 id="继承IReporter实现自定义报告"><a href="#继承IReporter实现自定义报告" class="headerlink" title="继承IReporter实现自定义报告"></a>继承IReporter实现自定义报告</h3><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line">public class ExtentTestNGIReporterListener implements IReporter &#123;</span><br><span class="line">    //生成的路径以及文件名</span><br><span class="line">    private static final String OUTPUT_FOLDER = &quot;test-output/&quot;;</span><br><span class="line">    private static final String FILE_NAME = &quot;index.html&quot;;</span><br><span class="line"> </span><br><span class="line">    private ExtentReports extent;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public void generateReport(List&lt;XmlSuite&gt; xmlSuites, List&lt;ISuite&gt; suites, String outputDirectory) &#123;</span><br><span class="line">        init();</span><br><span class="line">        boolean createSuiteNode = false;</span><br><span class="line">        if(suites.size()&gt;1)&#123;</span><br><span class="line">            createSuiteNode=true;</span><br><span class="line">        &#125;</span><br><span class="line">        for (ISuite suite : suites) &#123;</span><br><span class="line">            Map&lt;String, ISuiteResult&gt; result = suite.getResults();</span><br><span class="line">            //如果suite里面没有任何用例，直接跳过，不在报告里生成</span><br><span class="line">            if(result.size()==0)&#123;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            //统计suite下的成功、失败、跳过的总用例数</span><br><span class="line">            int suiteFailSize=0;</span><br><span class="line">            int suitePassSize=0;</span><br><span class="line">            int suiteSkipSize=0;</span><br><span class="line">            ExtentTest suiteTest=null;</span><br><span class="line">            //存在多个suite的情况下，在报告中将同一个一个suite的测试结果归为一类，创建一级节点。</span><br><span class="line">            if(createSuiteNode)&#123;</span><br><span class="line">                suiteTest = extent.createTest(suite.getName()).assignCategory(suite.getName());</span><br><span class="line">            &#125;</span><br><span class="line">            boolean createSuiteResultNode = false;</span><br><span class="line">            if(result.size()&gt;1)&#123;</span><br><span class="line">                createSuiteResultNode=true;</span><br><span class="line">            &#125;</span><br><span class="line">            for (ISuiteResult r : result.values()) &#123;</span><br><span class="line">                ExtentTest resultNode;</span><br><span class="line">                ITestContext context = r.getTestContext();</span><br><span class="line">                if(createSuiteResultNode)&#123;</span><br><span class="line">                    //没有创建suite的情况下，将在SuiteResult的创建为一级节点，否则创建为suite的一个子节点。</span><br><span class="line">                    if( null == suiteTest)&#123;</span><br><span class="line">                        resultNode = extent.createTest(r.getTestContext().getName());</span><br><span class="line">                    &#125;else&#123;</span><br><span class="line">                        resultNode = suiteTest.createNode(r.getTestContext().getName());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    resultNode = suiteTest;</span><br><span class="line">                &#125;</span><br><span class="line">                if(resultNode != null)&#123;</span><br><span class="line">                    resultNode.getModel().setName(suite.getName()+&quot; : &quot;+r.getTestContext().getName());</span><br><span class="line">                    if(resultNode.getModel().hasCategory())&#123;</span><br><span class="line">                        resultNode.assignCategory(r.getTestContext().getName());</span><br><span class="line">                    &#125;else&#123;</span><br><span class="line">                        resultNode.assignCategory(suite.getName(),r.getTestContext().getName());</span><br><span class="line">                    &#125;</span><br><span class="line">                    resultNode.getModel().setStartTime(r.getTestContext().getStartDate());</span><br><span class="line">                    resultNode.getModel().setEndTime(r.getTestContext().getEndDate());</span><br><span class="line">                    //统计SuiteResult下的数据</span><br><span class="line">                    int passSize = r.getTestContext().getPassedTests().size();</span><br><span class="line">                    int failSize = r.getTestContext().getFailedTests().size();</span><br><span class="line">                    int skipSize = r.getTestContext().getSkippedTests().size();</span><br><span class="line">                    suitePassSize += passSize;</span><br><span class="line">                    suiteFailSize += failSize;</span><br><span class="line">                    suiteSkipSize += skipSize;</span><br><span class="line">                    if(failSize&gt;0)&#123;</span><br><span class="line">                        resultNode.getModel().setStatus(Status.FAIL);</span><br><span class="line">                    &#125;</span><br><span class="line">                    resultNode.getModel().setDescription(String.format(&quot;Pass: %s ; Fail: %s ; Skip: %s ;&quot;,passSize,failSize,skipSize));</span><br><span class="line">                &#125;</span><br><span class="line">                buildTestNodes(resultNode,context.getFailedTests(), Status.FAIL);</span><br><span class="line">                buildTestNodes(resultNode,context.getSkippedTests(), Status.SKIP);</span><br><span class="line">                buildTestNodes(resultNode,context.getPassedTests(), Status.PASS);</span><br><span class="line">            &#125;</span><br><span class="line">            if(suiteTest!= null)&#123;</span><br><span class="line">                suiteTest.getModel().setDescription(String.format(&quot;Pass: %s ; Fail: %s ; Skip: %s ;&quot;,suitePassSize,suiteFailSize,suiteSkipSize));</span><br><span class="line">                if(suiteFailSize&gt;0)&#123;</span><br><span class="line">                    suiteTest.getModel().setStatus(Status.FAIL);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">//        for (String s : Reporter.getOutput()) &#123;</span><br><span class="line">//            extent.setTestRunnerOutput(s);</span><br><span class="line">//        &#125;</span><br><span class="line"> </span><br><span class="line">        extent.flush();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private void init() &#123;</span><br><span class="line">        //文件夹不存在的话进行创建</span><br><span class="line">        File reportDir= new File(OUTPUT_FOLDER);</span><br><span class="line">        if(!reportDir.exists()&amp;&amp; !reportDir .isDirectory())&#123;</span><br><span class="line">            reportDir.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        ExtentHtmlReporter htmlReporter = new ExtentHtmlReporter(OUTPUT_FOLDER + FILE_NAME);</span><br><span class="line">        // 设置静态文件的DNS</span><br><span class="line">        //怎么样解决cdn.rawgit.com访问不了的情况</span><br><span class="line">        htmlReporter.config().setResourceCDN(ResourceCDN.EXTENTREPORTS);</span><br><span class="line"> </span><br><span class="line">        htmlReporter.config().setDocumentTitle(&quot;测试报告&quot;);</span><br><span class="line">        htmlReporter.config().setReportName(&quot;测试报告&quot;);</span><br><span class="line">        htmlReporter.config().setChartVisibilityOnOpen(true);</span><br><span class="line">        htmlReporter.config().setTestViewChartLocation(ChartLocation.TOP);</span><br><span class="line">        htmlReporter.config().setTheme(Theme.DARK);</span><br><span class="line">        htmlReporter.config().setCSS(&quot;.node.level-1  ul&#123; display:none;&#125; .node.level-1.active ul&#123;display:block;&#125;&quot;);</span><br><span class="line">        extent = new ExtentReports();</span><br><span class="line">        extent.attachReporter(htmlReporter);</span><br><span class="line">        extent.setReportUsesManualConfiguration(true);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private void buildTestNodes(ExtentTest extenttest, IResultMap tests, Status status) &#123;</span><br><span class="line">        //存在父节点时，获取父节点的标签</span><br><span class="line">        String[] categories=new String[0];</span><br><span class="line">        if(extenttest != null )&#123;</span><br><span class="line">            List&lt;TestAttribute&gt; categoryList = extenttest.getModel().getCategoryContext().getAll();</span><br><span class="line">            categories = new String[categoryList.size()];</span><br><span class="line">            for(int index=0;index&lt;categoryList.size();index++)&#123;</span><br><span class="line">                categories[index] = categoryList.get(index).getName();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        ExtentTest test;</span><br><span class="line"> </span><br><span class="line">        if (tests.size() &gt; 0) &#123;</span><br><span class="line">            //调整用例排序，按时间排序</span><br><span class="line">            Set&lt;ITestResult&gt; treeSet = new TreeSet&lt;ITestResult&gt;(new Comparator&lt;ITestResult&gt;() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public int compare(ITestResult o1, ITestResult o2) &#123;</span><br><span class="line">                    return o1.getStartMillis()&lt;o2.getStartMillis()?-1:1;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            treeSet.addAll(tests.getAllResults());</span><br><span class="line">            for (ITestResult result : treeSet) &#123;</span><br><span class="line">                Object[] parameters = result.getParameters();</span><br><span class="line">                String name=&quot;&quot;;</span><br><span class="line">                //如果有参数，则使用参数的toString组合代替报告中的name</span><br><span class="line">                for(Object param:parameters)&#123;</span><br><span class="line">                    name+=param.toString();</span><br><span class="line">                &#125;</span><br><span class="line">                if(name.length()&gt;0)&#123;</span><br><span class="line">                    if(name.length()&gt;50)&#123;</span><br><span class="line">                        name= name.substring(0,49)+&quot;...&quot;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    name = result.getMethod().getMethodName();</span><br><span class="line">                &#125;</span><br><span class="line">                if(extenttest==null)&#123;</span><br><span class="line">                    test = extent.createTest(name);</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    //作为子节点进行创建时，设置同父节点的标签一致，便于报告检索。</span><br><span class="line">                    test = extenttest.createNode(name).assignCategory(categories);</span><br><span class="line">                &#125;</span><br><span class="line">                //test.getModel().setDescription(description.toString());</span><br><span class="line">                //test = extent.createTest(result.getMethod().getMethodName());</span><br><span class="line">                for (String group : result.getMethod().getGroups())</span><br><span class="line">                    test.assignCategory(group);</span><br><span class="line"> </span><br><span class="line">                List&lt;String&gt; outputList = Reporter.getOutput(result);</span><br><span class="line">                for(String output:outputList)&#123;</span><br><span class="line">                    //将用例的log输出报告中</span><br><span class="line">                    test.debug(output);</span><br><span class="line">                &#125;</span><br><span class="line">                if (result.getThrowable() != null) &#123;</span><br><span class="line">                    test.log(status, result.getThrowable());</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">                    test.log(status, &quot;Test &quot; + status.toString().toLowerCase() + &quot;ed&quot;);</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                test.getModel().setStartTime(getTime(result.getStartMillis()));</span><br><span class="line">                test.getModel().setEndTime(getTime(result.getEndMillis()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private Date getTime(long millis) &#123;</span><br><span class="line">        Calendar calendar = Calendar.getInstance();</span><br><span class="line">        calendar.setTimeInMillis(millis);</span><br><span class="line">        return calendar.getTime();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TestNG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TestNG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TestNG-DataProvider-3</title>
      <link href="/2021/10/25/TestNG-Data-3/"/>
      <url>/2021/10/25/TestNG-Data-3/</url>
      
        <content type="html"><![CDATA[<h3 id="自定义mysql格式参数化文件处理工具类"><a href="#自定义mysql格式参数化文件处理工具类" class="headerlink" title="自定义mysql格式参数化文件处理工具类"></a>自定义mysql格式参数化文件处理工具类</h3><span id="more"></span><h4 id="工具类实现"><a href="#工具类实现" class="headerlink" title="工具类实现"></a>工具类实现</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">public class MysqlData &#123;</span><br><span class="line">    int rows;</span><br><span class="line">    int columns;</span><br><span class="line">    Connection connection;</span><br><span class="line">    Statement statement;</span><br><span class="line"> </span><br><span class="line">    public MysqlData(String ip, String port, String databaseName, String userName, String password) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);//加载数据库驱动</span><br><span class="line">            String url = &quot;jdbc:mysql://&quot; + ip + &quot;:&quot; + port + &quot;/&quot; + databaseName;//数据库连接子协议</span><br><span class="line">            System.out.println(url);</span><br><span class="line">            this.connection = DriverManager.getConnection(url, userName, password);</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * 通过传入的sql语句获取参数</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public Object[][] getMysqlDataBySQL(String sql)&#123;</span><br><span class="line">        HashMap&lt;String, String&gt;[][] arrmap = null;</span><br><span class="line">        //获取创建语句对象</span><br><span class="line">        try &#123;</span><br><span class="line">            this.statement = connection.createStatement();</span><br><span class="line">            //执行sql语句，获取查询结果集</span><br><span class="line">            ResultSet result = statement.executeQuery(sql);</span><br><span class="line">            //获取总行数</span><br><span class="line">            this.rows = 0;</span><br><span class="line">            while(result.next()) &#123;</span><br><span class="line">                rows++;</span><br><span class="line">            &#125;</span><br><span class="line">            result.beforeFirst();</span><br><span class="line">            //获取总列数</span><br><span class="line">            ResultSetMetaData rd = result.getMetaData();</span><br><span class="line">            this.columns = rd.getColumnCount();</span><br><span class="line">            // 为了返回值是Object[][],定义一个多行单列的二维数组</span><br><span class="line">            arrmap = new HashMap[rows][1];</span><br><span class="line">            if (rows &gt; 1) &#123;</span><br><span class="line">                for (int i = 0; i &lt; rows; i++) &#123;</span><br><span class="line">                    arrmap[i][0] = new HashMap&lt;&gt;();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                System.out.println(&quot;sql查询结果集合中没有数据&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            //循环每行</span><br><span class="line">            int r = 0;</span><br><span class="line">            while (result.next()) &#123;</span><br><span class="line">                //循环每列，如果不要id，则i设为2</span><br><span class="line">                for (int i = 1; i &lt;= columns; i++) &#123;</span><br><span class="line">                    String key = result.getMetaData().getColumnName(i);</span><br><span class="line">                    String value = result.getString(i);</span><br><span class="line">                    arrmap[r][0].put(key, value);</span><br><span class="line">                &#125;</span><br><span class="line">                r++;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        return arrmap;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class MySQLDataProviderTest &#123;</span><br><span class="line"> </span><br><span class="line">    @DataProvider(name = &quot;num&quot;)</span><br><span class="line">    public Object[][] Numbers() throws BiffException, IOException &#123;</span><br><span class="line">        String ip = &quot;&quot;;</span><br><span class="line">        String port = &quot;&quot;;</span><br><span class="line">        String databaseName = &quot;&quot;;</span><br><span class="line">        String user = &quot;&quot;;</span><br><span class="line">        String password = &quot;&quot;;</span><br><span class="line">        MysqlData mysqlData = new MysqlData(ip,port,databaseName,user,password);</span><br><span class="line">        String sql = &quot;SELECT * FROM PHONE&quot;;</span><br><span class="line">        return mysqlData.getMysqlDataBySQL(sql);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Test(priority = 1, dataProvider = &quot;num&quot;)</span><br><span class="line">    public void test(HashMap&lt;String, String&gt; data)&#123;</span><br><span class="line">        System.out.println(data.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TestNG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TestNG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TestNG-DataProvider-1</title>
      <link href="/2021/10/25/TestNG-Data-2/"/>
      <url>/2021/10/25/TestNG-Data-2/</url>
      
        <content type="html"><![CDATA[<h3 id="自定义txt格式参数化文件处理工具类"><a href="#自定义txt格式参数化文件处理工具类" class="headerlink" title="自定义txt格式参数化文件处理工具类"></a>自定义txt格式参数化文件处理工具类</h3><span id="more"></span><h4 id="工具类实现"><a href="#工具类实现" class="headerlink" title="工具类实现"></a>工具类实现</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">public class TxtData &#123;</span><br><span class="line">    int rows;</span><br><span class="line">    int columns;</span><br><span class="line">    public String fileName;</span><br><span class="line">    public String delimiter;</span><br><span class="line">    public ArrayList&lt;String&gt; arrkey = new ArrayList&lt;String&gt;();</span><br><span class="line">    String sourceFile;</span><br><span class="line"> </span><br><span class="line">    public TxtData(String fileName, String delimiter)&#123;</span><br><span class="line">        this.fileName = fileName;</span><br><span class="line">        this.delimiter = delimiter;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * 通过分隔符获取参数</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public Object[][] getTxtDataByDelimiter()&#123;</span><br><span class="line">        List&lt;String&gt; dataList = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            dataList = FileUtil.readFile(getPath());</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        rows = dataList.size();</span><br><span class="line">        HashMap&lt;String, String&gt;[][] arrmap = new HashMap[rows - 1][1];</span><br><span class="line">        if (rows &gt; 1) &#123;</span><br><span class="line">            for (int i = 0; i &lt; rows - 1; i++) &#123;</span><br><span class="line">                arrmap[i][0] = new HashMap&lt;&gt;();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot;txt中没有数据&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        columns = (dataList.get(0).split(delimiter)).length;</span><br><span class="line">        for (int c = 0; c &lt; columns; c++) &#123;</span><br><span class="line">            for (String key : dataList.get(0).split(delimiter))&#123;</span><br><span class="line">                arrkey.add(key);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        for (int r = 1; r &lt; rows; r++) &#123;</span><br><span class="line">            String[] values = dataList.get(r).split(delimiter);</span><br><span class="line">            for (int c = 0; c &lt; columns; c++) &#123;</span><br><span class="line">                String value = values[c];</span><br><span class="line">                arrmap[r - 1][0].put(arrkey.get(c), value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        return arrmap;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * 获得txt文件的路径</span><br><span class="line">     * @return</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    public String getPath() throws IOException &#123;</span><br><span class="line">        File directory = new File(&quot;.&quot;);</span><br><span class="line">        sourceFile = directory.getCanonicalPath() + &quot;\\src\\main\\resources\\data\\&quot;</span><br><span class="line">                + fileName + &quot;.txt&quot;;</span><br><span class="line">        return sourceFile;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class TxtDataproviderTest &#123;</span><br><span class="line"> </span><br><span class="line">    @DataProvider(name = &quot;num&quot;)</span><br><span class="line">    public Object[][] Numbers() throws BiffException, IOException &#123;</span><br><span class="line">        TxtData data = new TxtData(&quot;testtxt&quot;, &quot;,&quot;);</span><br><span class="line">        return data.getTxtDataByDelimiter();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Test(priority = 1,dataProvider = &quot;num&quot;)</span><br><span class="line">    public void test(HashMap&lt;String, String&gt; data)&#123;</span><br><span class="line">        System.out.println(data.toString());</span><br><span class="line">        int num1 = Integer.parseInt(data.get(&quot;num1&quot;));</span><br><span class="line">        int num2 = Integer.parseInt(data.get(&quot;num2&quot;));</span><br><span class="line">        int result = Integer.parseInt(data.get(&quot;result&quot;));</span><br><span class="line">        Assert.assertEquals(num1+num2 , result);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TestNG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TestNG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TestNG-DataProvider-1</title>
      <link href="/2021/10/25/TestNG-Data-1/"/>
      <url>/2021/10/25/TestNG-Data-1/</url>
      
        <content type="html"><![CDATA[<h3 id="自定义excel格式参数化文件处理工具类-POI库，支持高版本"><a href="#自定义excel格式参数化文件处理工具类-POI库，支持高版本" class="headerlink" title="自定义excel格式参数化文件处理工具类-POI库，支持高版本"></a>自定义excel格式参数化文件处理工具类-POI库，支持高版本</h3><span id="more"></span><h4 id="工具类实现"><a href="#工具类实现" class="headerlink" title="工具类实现"></a>工具类实现</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">public class ExcelDataNew &#123;</span><br><span class="line">    public Workbook workbook;</span><br><span class="line">    public Sheet sheet;</span><br><span class="line">    public Cell cell;</span><br><span class="line">    int rows;</span><br><span class="line">    int columns;</span><br><span class="line">    public String fileName; //区别于ExcelData，该fileName需要带后缀</span><br><span class="line">    public String caseName;</span><br><span class="line">    public ArrayList&lt;String&gt; arrkey = new ArrayList&lt;String&gt;();</span><br><span class="line">    String sourceFile;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * @param fileName   excel文件名</span><br><span class="line">     * @param caseName   sheet名</span><br><span class="line">     */</span><br><span class="line">    public ExcelDataNew(String fileName, String caseName) &#123;</span><br><span class="line">        super();</span><br><span class="line">        this.fileName = fileName;</span><br><span class="line">        this.caseName = caseName;</span><br><span class="line">        setWorkbook();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * 判断，设置workbook</span><br><span class="line">     * xls格式的需要使用HSSFWorkbook类来解析，xlsx格式的需要使用XSSFWorkbook格式来解析</span><br><span class="line">     */</span><br><span class="line">    public void setWorkbook()&#123;</span><br><span class="line">        if(this.fileName == null)&#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        String extString = fileName.substring(fileName.lastIndexOf(&quot;.&quot;));</span><br><span class="line">        InputStream is = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            is = new FileInputStream(getPath());</span><br><span class="line">            if(&quot;.xls&quot;.equals(extString))&#123;</span><br><span class="line">                this.workbook = new HSSFWorkbook(is);</span><br><span class="line">            &#125;else if(&quot;.xlsx&quot;.equals(extString))&#123;</span><br><span class="line">                this.workbook = new XSSFWorkbook(is);</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * 获取cell中的值，转换为String类型</span><br><span class="line">     * @param cell</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String getCellFormatValue(Cell cell) &#123;</span><br><span class="line">        String cellValue = &quot;&quot;;</span><br><span class="line">        if (cell != null) &#123;</span><br><span class="line">            //判断cell类型</span><br><span class="line">            switch (cell.getCellType()) &#123;</span><br><span class="line">                case Cell.CELL_TYPE_NUMERIC: &#123;</span><br><span class="line">                    cellValue = String.valueOf(cell.getNumericCellValue());</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                case Cell.CELL_TYPE_STRING: &#123;</span><br><span class="line">                    cellValue = cell.getRichStringCellValue().getString();</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                default:</span><br><span class="line">                    cellValue = &quot;&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return cellValue;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * 获得excel表中的数据</span><br><span class="line">     */</span><br><span class="line">    public Object[][] getExcelData() throws BiffException, IOException &#123;</span><br><span class="line">        this.sheet = workbook.getSheet(caseName);</span><br><span class="line">        this.rows = sheet.getPhysicalNumberOfRows();</span><br><span class="line">        this.columns = sheet.getRow(0).getPhysicalNumberOfCells();</span><br><span class="line">        // 为了返回值是Object[][],定义一个多行单列的二维数组</span><br><span class="line">        HashMap&lt;String, String&gt;[][] arrmap = new HashMap[rows - 1][1];</span><br><span class="line">        // 对数组中所有元素hashmap进行初始化</span><br><span class="line">        if (rows &gt; 1) &#123;</span><br><span class="line">            for (int i = 0; i &lt; rows - 1; i++) &#123;</span><br><span class="line">                arrmap[i][0] = new HashMap&lt;&gt;();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot;excel中没有数据&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        // 获得首行的列名，作为hashmap的key值</span><br><span class="line">        Row rowHead = sheet.getRow(0);</span><br><span class="line">        for (int c = 0; c &lt; columns; c++) &#123;</span><br><span class="line">            String cellvalue = getCellFormatValue(rowHead.getCell(c));</span><br><span class="line">            arrkey.add(cellvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        // 遍历所有的单元格的值添加到hashmap中</span><br><span class="line">        for (int r = 1; r &lt; rows; r++) &#123;</span><br><span class="line">            Row row = sheet.getRow(r);</span><br><span class="line">            for (int c = 0; c &lt; columns; c++) &#123;</span><br><span class="line">                String cellvalue = getCellFormatValue(row.getCell(c));</span><br><span class="line">                arrmap[r - 1][0].put(arrkey.get(c), cellvalue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return arrmap;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    /**</span><br><span class="line">     * 获得excel文件的路径</span><br><span class="line">     * @return</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    public String getPath() throws IOException &#123;</span><br><span class="line">        File directory = new File(&quot;.&quot;);</span><br><span class="line">        sourceFile = directory.getCanonicalPath() + &quot;\\src\\main\\resources\\data\\&quot;</span><br><span class="line">                + fileName;</span><br><span class="line">        return sourceFile;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class ExcelDataproviderTest &#123;</span><br><span class="line"> </span><br><span class="line">    @DataProvider(name = &quot;num&quot;)</span><br><span class="line">    public Object[][] Numbers() throws BiffException, IOException &#123;</span><br><span class="line">        ExcelDataNew data = new ExcelDataNew(&quot;testexcel.xlsx&quot;, &quot;test&quot;);</span><br><span class="line">        return data.getExcelData();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Test(priority = 1, dataProvider = &quot;num&quot;)</span><br><span class="line">    public void test(HashMap&lt;String, String&gt; data) &#123;</span><br><span class="line">        System.out.println(data.toString());</span><br><span class="line">        int num1 = Integer.parseInt(data.get(&quot;num1&quot;));</span><br><span class="line">        int num2 = Integer.parseInt(data.get(&quot;num2&quot;));</span><br><span class="line">        int result = Integer.parseInt(data.get(&quot;result&quot;));</span><br><span class="line">        Assert.assertEquals(num1 + num2, result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TestNG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TestNG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-第三方库和工具</title>
      <link href="/2021/10/25/react-lib/"/>
      <url>/2021/10/25/react-lib/</url>
      
        <content type="html"><![CDATA[<h3 id="React-实用工具使用与第三方库"><a href="#React-实用工具使用与第三方库" class="headerlink" title="React 实用工具使用与第三方库"></a>React 实用工具使用与第三方库</h3><span id="more"></span><h4 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h4><h5 id="JSON转换"><a href="#JSON转换" class="headerlink" title="JSON转换"></a>JSON转换</h5><p>String转json对象：<code>JSON.parse()</code><br>json对象转json String：<code>JSON.stringify()</code></p><h5 id="百分比计算"><a href="#百分比计算" class="headerlink" title="百分比计算"></a>百分比计算</h5><p><code>Math.round(value/total*10000)/100.00</code></p><h5 id="时间格式转换"><a href="#时间格式转换" class="headerlink" title="时间格式转换"></a>时间格式转换</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let sdate = new Date(r.create_time).toJSON();</span><br><span class="line">let sdate2 = new Date(+new Date(sdate) + 8 * 3600 * 1000).toISOString().replace(/T/g, &#x27; &#x27;).replace(/\.[\d]&#123;3&#125;Z/, &#x27;&#x27;);</span><br></pre></td></tr></table></figure><h5 id="base64转换"><a href="#base64转换" class="headerlink" title="base64转换"></a>base64转换</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let string = window.atob(base64String);</span><br><span class="line">//直接atob会乱码，以下两行解决乱码问题</span><br><span class="line">string = escape(string);</span><br><span class="line">string = decodeURIComponent(string);</span><br></pre></td></tr></table></figure><h4 id="第三方库"><a href="#第三方库" class="headerlink" title="第三方库"></a>第三方库</h4><h5 id="json组件"><a href="#json组件" class="headerlink" title="json组件"></a>json组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import ReactJson from &#x27;react-json-view&#x27;;</span><br><span class="line">&lt;ReactJson src=&#123;this.state.jsonSrc&#125; name=&#123;null&#125;</span><br><span class="line">       iconStyle=&quot;square&quot; collapseStringsAfterLength=&#123;30&#125; displayDataTypes=&#123;false&#125; collapsed=&#123;false&#125;</span><br><span class="line">       style=&#123;&#123;fontFamily:&#x27;微软雅黑&#x27;&#125;&#125;/&gt;</span><br></pre></td></tr></table></figure><h5 id="echarts组件"><a href="#echarts组件" class="headerlink" title="echarts组件"></a>echarts组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import ReactEcharts from &quot;echarts-for-react&quot;;</span><br><span class="line">import echartsTheme from &#x27;../../theme/tabletheme1&#x27;;</span><br><span class="line">componentWillMount()&#123;</span><br><span class="line">       echarts.registerTheme(&#x27;theme&#x27;, echartsTheme);</span><br><span class="line">   &#125;</span><br><span class="line">&lt;ReactEcharts option=&#123;this.getOption()&#125;</span><br><span class="line">       style=&#123;&#123;height: 400&#125;&#125;</span><br><span class="line">       theme=&quot;theme&quot;&gt;&lt;/ReactEcharts&gt;</span><br></pre></td></tr></table></figure><h5 id="cookie操作"><a href="#cookie操作" class="headerlink" title="cookie操作"></a>cookie操作</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import cookie from &#x27;react-cookies&#x27;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>web-文件上传</title>
      <link href="/2021/10/25/web-file/"/>
      <url>/2021/10/25/web-file/</url>
      
        <content type="html"><![CDATA[<h3 id="web开发-文件上传功能"><a href="#web开发-文件上传功能" class="headerlink" title="web开发-文件上传功能"></a>web开发-文件上传功能</h3><span id="more"></span><h4 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&#123;&#123;marginTop: 30, marginBottom: 20,width:&#x27;50%&#x27;,marginLeft: 20&#125;&#125;&gt;</span><br><span class="line">                        &lt;span style=&#123;&#123;display: &#x27;inline-block&#x27;, width: 150&#125;&#125;&gt; &lt;Icon type=&quot;to-top&quot;/&gt;上传单个文件&lt;/span&gt;</span><br><span class="line">                        &lt;Upload</span><br><span class="line">                            name=&quot;file&quot;</span><br><span class="line">                            action=&quot;http://localhost:8080/upload&quot;</span><br><span class="line">                            /*onChange = &#123;this.handleChange&#125;</span><br><span class="line">                             onRemove = &#123;this.remove&#125;*/&gt;</span><br><span class="line">                            &lt;Button&gt;</span><br><span class="line">                                &lt;Icon type=&quot;upload&quot; /&gt; Click to Upload</span><br><span class="line">                            &lt;/Button&gt;</span><br><span class="line">                        &lt;/Upload&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;div style=&#123;&#123;marginTop: 30, marginBottom: 20,width:&#x27;50%&#x27;,marginLeft: 20&#125;&#125;&gt;</span><br><span class="line">                        &lt;span style=&#123;&#123;display: &#x27;inline-block&#x27;, width: 150&#125;&#125;&gt; &lt;Icon type=&quot;to-top&quot;/&gt;上传多个文件&lt;/span&gt;</span><br><span class="line">                        &lt;Upload</span><br><span class="line">                            name=&quot;file&quot;</span><br><span class="line">                            action=&quot;http://localhost:8080/multiUpload&quot;</span><br><span class="line">                            multiple=&#123;true&#125;</span><br><span class="line">                            /*onChange = &#123;this.handleChange&#125;</span><br><span class="line">                             onRemove = &#123;this.remove&#125;*/&gt;</span><br><span class="line">                            &lt;Button&gt;</span><br><span class="line">                                &lt;Icon type=&quot;upload&quot; /&gt; Click to Upload</span><br><span class="line">                            &lt;/Button&gt;</span><br><span class="line">                        &lt;/Upload&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br></pre></td></tr></table></figure><h4 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h4><h5 id="单文件上传"><a href="#单文件上传" class="headerlink" title="单文件上传"></a>单文件上传</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;/upload&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public String upload(@RequestParam(&quot;file&quot;) MultipartFile file) &#123;</span><br><span class="line">        if (file.isEmpty()) &#123;</span><br><span class="line">            return &quot;上传失败，请选择文件&quot;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            String fileName = file.getOriginalFilename();</span><br><span class="line">            File directory = new File(&quot;.&quot;);</span><br><span class="line">            String filePath = directory.getCanonicalPath() + &quot;\\src\\main\\resources\\files\\&quot;;</span><br><span class="line">            File dest = new File(filePath + fileName);</span><br><span class="line">            file.transferTo(dest);</span><br><span class="line">            System.out.println(&quot;success&quot;);</span><br><span class="line">            return &quot;上传成功&quot;;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            System.out.println(&quot;fail&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return &quot;上传失败！&quot;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;/multiUpload&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public String multiUpload(HttpServletRequest request) &#123;</span><br><span class="line">        List&lt;MultipartFile&gt; files = ((MultipartHttpServletRequest) request).getFiles(&quot;file&quot;);</span><br><span class="line">        File directory = new File(&quot;.&quot;);</span><br><span class="line">        String filePath = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            filePath = directory.getCanonicalPath() + &quot;\\src\\main\\resources\\files\\&quot;;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return &quot;error&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = 0; i &lt; files.size(); i++) &#123;</span><br><span class="line">            MultipartFile file = files.get(i);</span><br><span class="line">            if (file.isEmpty()) &#123;</span><br><span class="line">                return &quot;上传第&quot; + (i++) + &quot;个文件失败&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            String fileName = file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">            File dest = new File(filePath + fileName);</span><br><span class="line">            try &#123;</span><br><span class="line">                file.transferTo(dest);</span><br><span class="line">                System.out.println(&quot;第&quot; + (i + 1) + &quot;个文件上传成功&quot;);</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                System.out.println(e.toString());</span><br><span class="line">                return &quot;上传第&quot; + (i++) + &quot;个文件失败&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return &quot;上传成功&quot;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="文件操作工具类"><a href="#文件操作工具类" class="headerlink" title="文件操作工具类"></a>文件操作工具类</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class FileUtil &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 按行读取文件，一行为一个String</span><br><span class="line">     * @param path filePath</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static List&lt;String&gt; readFile(String path)&#123;</span><br><span class="line">        List&lt;String&gt; result = new ArrayList&lt;String&gt;();</span><br><span class="line">        FileReader reader = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            reader = new FileReader(path);</span><br><span class="line"></span><br><span class="line">            BufferedReader br = new BufferedReader(reader);</span><br><span class="line">            String str = null;</span><br><span class="line">            while ((str = br.readLine()) != null) &#123;</span><br><span class="line">                if(StringUtils.isNotEmpty(str)) &#123;</span><br><span class="line">                    result.add(str);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            br.close();</span><br><span class="line">            reader.close();</span><br><span class="line">        &#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 读文件结果保存为一个字符串中</span><br><span class="line">     */</span><br><span class="line">    public static String readFileToString (String path) &#123;</span><br><span class="line">        File file02 = new File(path);</span><br><span class="line">        FileInputStream is = null;</span><br><span class="line">        StringBuilder stringBuilder = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            if (file02.length() != 0) &#123;</span><br><span class="line">                /**</span><br><span class="line">                 * 文件有内容才去读文件</span><br><span class="line">                 */</span><br><span class="line">                is = new FileInputStream(file02);</span><br><span class="line">                InputStreamReader streamReader = new InputStreamReader(is);</span><br><span class="line">                BufferedReader reader = new BufferedReader(streamReader);</span><br><span class="line">                String line;</span><br><span class="line">                stringBuilder = new StringBuilder();</span><br><span class="line">                while ((line = reader.readLine()) != null) &#123;</span><br><span class="line">                    // stringBuilder.append(line);</span><br><span class="line">                    stringBuilder.append(line);</span><br><span class="line">                &#125;</span><br><span class="line">                reader.close();</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                return &quot;&quot;;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return String.valueOf(stringBuilder);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * 写入文件</span><br><span class="line">     * @param path</span><br><span class="line">     * @param</span><br><span class="line">     */</span><br><span class="line">    public static void writeToFile(String path ,String content) &#123;</span><br><span class="line">        FileWriter fw = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            //如果文件存在，则追加内容；如果文件不存在，则创建文件</span><br><span class="line">            File f=new File(path);</span><br><span class="line">            fw = new FileWriter(f, true);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        PrintWriter pw = new PrintWriter(fw);</span><br><span class="line">        pw.println(content);</span><br><span class="line">        pw.flush();</span><br><span class="line">        try &#123;</span><br><span class="line">            fw.flush();</span><br><span class="line">            pw.close();</span><br><span class="line">            fw.close();</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void deleteFile(String path) &#123;</span><br><span class="line">        File f = new File(path);</span><br><span class="line">        if (f.exists())&#123;</span><br><span class="line">            f.delete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-登录</title>
      <link href="/2021/10/22/react-login/"/>
      <url>/2021/10/22/react-login/</url>
      
        <content type="html"><![CDATA[<h3 id="react-登录功能"><a href="#react-登录功能" class="headerlink" title="react 登录功能"></a>react 登录功能</h3><span id="more"></span><h4 id="登录功能实现"><a href="#登录功能实现" class="headerlink" title="登录功能实现"></a>登录功能实现</h4><h5 id="页面-账号密码输入框、登录按钮"><a href="#页面-账号密码输入框、登录按钮" class="headerlink" title="页面-账号密码输入框、登录按钮"></a>页面-账号密码输入框、登录按钮</h5><p>采用Form表单：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Button,Form,Input&#125; from &#x27;antd&#x27;;</span><br><span class="line"></span><br><span class="line">const layout = &#123;</span><br><span class="line">labelCol: &#123; span: 8 &#125;,</span><br><span class="line">wrapperCol: &#123; span: 16 &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&lt;Form</span><br><span class="line">             &#123;...layout&#125;</span><br><span class="line">             name=&quot;basic&quot;</span><br><span class="line">             initialValues=&#123;&#123; remember: true &#125;&#125;</span><br><span class="line">             onFinish=&#123;this.onFinish&#125;</span><br><span class="line">             onFinishFailed=&#123;this.onFinishFailed&#125;</span><br><span class="line">         &gt;</span><br><span class="line">             &lt;Form.Item</span><br><span class="line">label=&quot;Username&quot;</span><br><span class="line">name=&quot;username&quot;</span><br><span class="line">rules=&#123;[&#123; required: true, message: &#x27;Please input your username!&#x27; &#125;]&#125;</span><br><span class="line">             &gt;</span><br><span class="line">                 &lt;Input /&gt;</span><br><span class="line">             &lt;/Form.Item&gt;</span><br><span class="line"></span><br><span class="line">             &lt;Form.Item</span><br><span class="line">                 label=&quot;Password&quot;</span><br><span class="line">name=&quot;password&quot;</span><br><span class="line">rules=&#123;[&#123; required: true, message: &#x27;Please input your password!&#x27; &#125;]&#125;</span><br><span class="line">&gt;</span><br><span class="line">&lt;Input.Password /&gt;</span><br><span class="line">&lt;/Form.Item&gt;</span><br><span class="line"></span><br><span class="line">&lt;Form.Item &#123;...tailLayout&#125;&gt;</span><br><span class="line">&lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot;&gt;</span><br><span class="line">Login</span><br><span class="line">&lt;/Button&gt;</span><br><span class="line">&lt;/Form.Item&gt;</span><br><span class="line">&lt;/Form&gt;</span><br></pre></td></tr></table></figure><h5 id="登录验证及cookie操作"><a href="#登录验证及cookie操作" class="headerlink" title="登录验证及cookie操作"></a>登录验证及cookie操作</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">onFinish = (values) =&gt;&#123;</span><br><span class="line">       console.log(values);</span><br><span class="line">       let url = &quot;http://***.***.com/login&quot;;</span><br><span class="line">       fetch(url, &#123;</span><br><span class="line">           method: &#x27;POST&#x27;,</span><br><span class="line">           headers: &#123;</span><br><span class="line">               &#x27;Access-Control-Allow-Origin&#x27;: &#x27;*&#x27;,</span><br><span class="line">               &#x27;Access-Control-Allow-Methods&#x27;:&#x27;POST, GET, OPTIONS, DELETE, PUT&#x27;,</span><br><span class="line">               &#x27;Access-Control-Allow-Credentials&#x27;:&#x27;true&#x27;,</span><br><span class="line">               &#x27;Accept&#x27;: &#x27;application/json&#x27;,</span><br><span class="line">               &#x27;Content-Type&#x27;: &#x27;application/json;charset=utf-8&#x27;,</span><br><span class="line">               &#x27;mode&#x27;:&#x27;no-cors&#x27;,</span><br><span class="line">               &#x27;Access-Control-Allow-Headers&#x27;:&#x27;Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Requested-With,Token,x-access-token&#x27;,</span><br><span class="line">           &#125;,</span><br><span class="line">           credentials: &#x27;include&#x27;,</span><br><span class="line">           body: JSON.stringify(values),</span><br><span class="line">       &#125;).then(response =&gt; response.json())</span><br><span class="line">           .then(responseJson =&gt; &#123;</span><br><span class="line">               //处理登录请求结果</span><br><span class="line">               if (responseJson.code === &quot;0&quot;) &#123;</span><br><span class="line">                   //cookie有效期1个小时</span><br><span class="line">                   cookie.save(&#x27;user&#x27;, values.username,&#123;path:&quot;/&quot;,maxAge:3600&#125;);</span><br><span class="line">                   message.success(&quot;login success&quot;);</span><br><span class="line">                   this.props.history.push(&#x27;/home&#x27;, null);</span><br><span class="line">               &#125;else &#123;</span><br><span class="line">                   message.error(&quot;login failed&quot;);</span><br><span class="line">               &#125;</span><br><span class="line">               console.log(responseJson);</span><br><span class="line">           &#125;).catch(function (e) &#123;</span><br><span class="line">           console.log(&quot;Oops, error&quot;);</span><br><span class="line">           message.error(&quot;login failed&quot;)</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   onFinishFailed = (errorInfo ) =&gt;&#123;</span><br><span class="line">       console.log(&#x27;Failed:&#x27;, errorInfo);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h5 id="登录态失效判断及跳转"><a href="#登录态失效判断及跳转" class="headerlink" title="登录态失效判断及跳转"></a>登录态失效判断及跳转</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">componentWillMount()&#123;</span><br><span class="line">       console.log(&quot;user = &quot; + cookie.load(&quot;user&quot;));</span><br><span class="line">       if (cookie.load(&quot;user&quot;) === undefined || cookie.load(&quot;user&quot;) === null) &#123;</span><br><span class="line">           this.props.history.push(&#x27;/login&#x27;, null);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ul><li>注意：页面跳转失效处理如下<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123;withRouter&#125; from &#x27;react-router-dom&#x27;; </span><br><span class="line">class HomePage extends Component&#123;&#125; </span><br><span class="line">export default withRouter(HomePage);</span><br></pre></td></tr></table></figure></li></ul><h4 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h4><p>根据cookie中存储的用户信息，判断是否对页面上某些元素可见</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let hasPermission = this.hasPermission(cookie.load(&quot;user&quot;));</span><br><span class="line">hasPermission = (user) =&gt; &#123;</span><br><span class="line">      if (user === &quot;admin&quot;)&#123;</span><br><span class="line">          return true;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">          return false;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#123;hasCallPermission?&lt;div&gt;……&lt;/div&gt;:null&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-excel</title>
      <link href="/2021/10/22/react-excel/"/>
      <url>/2021/10/22/react-excel/</url>
      
        <content type="html"><![CDATA[<h3 id="React前端实现excel的导出"><a href="#React前端实现excel的导出" class="headerlink" title="React前端实现excel的导出"></a>React前端实现excel的导出</h3><span id="more"></span><h4 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">//excelUtil.js</span><br><span class="line">import XLSX from &#x27;xlsx&#x27;;</span><br><span class="line">import React,&#123;useState,useEffect&#125; from &#x27;react&#x27;;</span><br><span class="line">function importExcel(file)&#123;</span><br><span class="line"></span><br><span class="line">    // 获取上传的文件对象</span><br><span class="line">    const &#123; files &#125; = file.target;</span><br><span class="line">    // 通过FileReader对象读取文件</span><br><span class="line">    const fileReader = new FileReader();</span><br><span class="line">    fileReader.onload = event =&gt; &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            const &#123; result &#125; = event.target;</span><br><span class="line">            // 以二进制流方式读取得到整份excel表格对象</span><br><span class="line">            const workbook = XLSX.read(result, &#123; type: &#x27;binary&#x27; &#125;);</span><br><span class="line">            let data = []; // 存储获取到的数据</span><br><span class="line">            // 遍历每张工作表进行读取（这里默认只读取第一张表）</span><br><span class="line">            for (const sheet in workbook.Sheets) &#123;</span><br><span class="line">                if (workbook.Sheets.hasOwnProperty(sheet)) &#123;</span><br><span class="line">                    // 利用 sheet_to_json 方法将 excel 转成 json 数据</span><br><span class="line">                    data = data.concat(XLSX.utils.sheet_to_json(workbook.Sheets[sheet]));</span><br><span class="line">                    // break; // 如果只取第一张表，就取消注释这行</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            console.log(data);</span><br><span class="line">        &#125; catch (e) &#123;</span><br><span class="line">            // 这里可以抛出文件类型错误不正确的相关提示</span><br><span class="line">            console.log(&#x27;文件类型不正确&#x27;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    // 以二进制方式打开文件</span><br><span class="line">    fileReader.readAsBinaryString(files[0]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function exportExcel(headers, data, fileName = &#x27;请假记录表.xlsx&#x27;) &#123;</span><br><span class="line">    const _headers = headers</span><br><span class="line">        .map((item, i) =&gt; Object.assign(&#123;&#125;, &#123; key: item.key, title: item.title, position: String.fromCharCode(65 + i) + 1 &#125;))</span><br><span class="line">        .reduce((prev, next) =&gt; Object.assign(&#123;&#125;, prev, &#123; [next.position]: &#123; key: next.key, v: next.title &#125; &#125;), &#123;&#125;);</span><br><span class="line"></span><br><span class="line">    const _data = data</span><br><span class="line">        .map((item, i) =&gt; headers.map((key, j) =&gt; Object.assign(&#123;&#125;, &#123; content: item[key.key], position: String.fromCharCode(65 + j) + (i + 2) &#125;)))</span><br><span class="line">        // 对刚才的结果进行降维处理（二维数组变成一维数组）</span><br><span class="line">        .reduce((prev, next) =&gt; prev.concat(next))</span><br><span class="line">        // 转换成 worksheet 需要的结构</span><br><span class="line">        .reduce((prev, next) =&gt; Object.assign(&#123;&#125;, prev, &#123; [next.position]: &#123; v: next.content &#125; &#125;), &#123;&#125;);</span><br><span class="line"></span><br><span class="line">    // 合并 headers 和 data</span><br><span class="line">    const output = Object.assign(&#123;&#125;, _headers, _data);</span><br><span class="line">    // 获取所有单元格的位置</span><br><span class="line">    const outputPos = Object.keys(output);</span><br><span class="line">    // 计算出范围 ,[&quot;A1&quot;,..., &quot;H2&quot;]</span><br><span class="line">    const ref = `$&#123;outputPos[0]&#125;:$&#123;outputPos[outputPos.length - 1]&#125;`;</span><br><span class="line"></span><br><span class="line">    // 构建 workbook 对象</span><br><span class="line">    const wb = &#123;</span><br><span class="line">        SheetNames: [&#x27;mySheet&#x27;],</span><br><span class="line">        Sheets: &#123;</span><br><span class="line">            mySheet: Object.assign(</span><br><span class="line">                &#123;&#125;,</span><br><span class="line">                output,</span><br><span class="line">                &#123;</span><br><span class="line">                    &#x27;!ref&#x27;: ref,</span><br><span class="line">                    &#x27;!cols&#x27;: [&#123; wpx: 45 &#125;, &#123; wpx: 100 &#125;, &#123; wpx: 200 &#125;, &#123; wpx: 80 &#125;, &#123; wpx: 150 &#125;, &#123; wpx: 100 &#125;, &#123; wpx: 300 &#125;, &#123; wpx: 300 &#125;],</span><br><span class="line">                &#125;,</span><br><span class="line">            ),</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // 导出 Excel</span><br><span class="line">    XLSX.writeFile(wb, fileName);</span><br><span class="line">&#125;</span><br><span class="line">export default &#123;importExcel,exportExcel&#125;;</span><br></pre></td></tr></table></figure><h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import ExcelUtil from &quot;../../component/ExcelUtil/ExcelUtil&quot;;</span><br><span class="line">&lt;Button type=&quot;primary&quot; onClick=&#123;() =&gt; &#123;ExcelUtil.exportExcel(columns, this.state.taskListData,&quot;结果.xlsx&quot;)&#125;&#125;&gt;导出&lt;/Button&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux-后台执行</title>
      <link href="/2021/10/22/linux-1/"/>
      <url>/2021/10/22/linux-1/</url>
      
        <content type="html"><![CDATA[<h3 id="后台运行"><a href="#后台运行" class="headerlink" title="后台运行"></a>后台运行</h3><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup [command] &amp;</span><br></pre></td></tr></table></figure><p>该命令启动的后台进程可能会被杀掉，解决办法是写在一个脚本里面，示例如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">BUILD_ID=dontKillMe</span><br><span class="line"></span><br><span class="line">nohup [command] &amp;</span><br></pre></td></tr></table></figure><p>执行该脚本</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>selenium-编码前准备</title>
      <link href="/2021/10/22/selenium-1/"/>
      <url>/2021/10/22/selenium-1/</url>
      
        <content type="html"><![CDATA[<p>selenium Java编码准备</p><span id="more"></span><h3 id="selenium-Java-maven依赖"><a href="#selenium-Java-maven依赖" class="headerlink" title="selenium Java maven依赖"></a>selenium Java maven依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.44.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="selenum-启动firefox浏览器注意事项"><a href="#selenum-启动firefox浏览器注意事项" class="headerlink" title="selenum 启动firefox浏览器注意事项"></a>selenum 启动firefox浏览器注意事项</h3><p>selenium启动Firefox，不需要额外的driver<br>如果没有安装到默认路径C盘，需要设置路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.setProperty(&quot;webdriver.firefox.bin&quot;,&quot;D:/……/Mozilla Firefox/firefox.exe&quot;);</span><br><span class="line">WebDriver driver = new FirefoxDriver();</span><br></pre></td></tr></table></figure><h3 id="firefox的版本与selenium的版本对应关系"><a href="#firefox的版本与selenium的版本对应关系" class="headerlink" title="firefox的版本与selenium的版本对应关系"></a>firefox的版本与selenium的版本对应关系</h3><p> 【Selenium】 -&gt; 【FireFox】<br>2.25.0 -&gt; 18<br>2.30.0 -&gt; 19<br>2.31.0 -&gt; 20<br>2.42.2 -&gt; 29<br>2.44.0 -&gt; 33 (不支持31)<br>2.53.0 -&gt; 43,46(不支持47)<br>2.41.0 -&gt; 26(绿色版本)<br>2.44 -&gt; 32.0-35.0</p><h4 id="chrome版本与chromedriver版本对应关系"><a href="#chrome版本与chromedriver版本对应关系" class="headerlink" title="chrome版本与chromedriver版本对应关系"></a>chrome版本与chromedriver版本对应关系</h4><table><thead><tr><th>ChromeDriver Version</th><th>Chrome Version</th></tr></thead><tbody><tr><td>83.0.4103.39</td><td>83</td></tr><tr><td>83.0.4103.14</td><td>83</td></tr><tr><td>81.0.4044.138</td><td>81</td></tr><tr><td>81.0.4044.69</td><td>81</td></tr><tr><td>81.0.4044.20</td><td>81</td></tr><tr><td>80.0.3987.106</td><td>80</td></tr><tr><td>80.0.3987.16</td><td>80</td></tr><tr><td>79.0.3945.36</td><td>79</td></tr><tr><td>79.0.3945.16</td><td>79</td></tr><tr><td>78.0.3904.105</td><td>78</td></tr><tr><td>78.0.3904.70</td><td>78</td></tr><tr><td>78.0.3904.11</td><td>78</td></tr><tr><td>77.0.3865.40</td><td>77</td></tr><tr><td>77.0.3865.10</td><td>77</td></tr><tr><td>76.0.3809.126</td><td>76</td></tr><tr><td>76.0.3809.68</td><td>76</td></tr><tr><td>76.0.3809.25</td><td>76</td></tr><tr><td>76.0.3809.12</td><td>76</td></tr><tr><td>75.0.3770.90</td><td>75</td></tr><tr><td>75.0.3770.8</td><td>75</td></tr><tr><td>74.0.3729.6</td><td>74</td></tr><tr><td>73.0.3683.68</td><td>73</td></tr><tr><td>72.0.3626.69</td><td>72</td></tr><tr><td>2.46</td><td>71-73</td></tr><tr><td>2.46</td><td>71-73</td></tr><tr><td>2.45</td><td>70-72</td></tr><tr><td>2.44</td><td>69-71</td></tr><tr><td>2.43</td><td>69-71</td></tr><tr><td>2.42</td><td>68-70</td></tr><tr><td>2.41</td><td>67-69</td></tr><tr><td>2.40</td><td>66-68</td></tr><tr><td>2.39</td><td>66-68</td></tr><tr><td>2.38</td><td>65-67</td></tr><tr><td>2.37</td><td>64-66</td></tr><tr><td>2.36</td><td>63-65</td></tr><tr><td>2.35</td><td>62-64</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> selenium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> selenium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git知识点总结</title>
      <link href="/2021/10/22/git/"/>
      <url>/2021/10/22/git/</url>
      
        <content type="html"><![CDATA[<p>git操作总结</p><span id="more"></span><h3 id="初级"><a href="#初级" class="headerlink" title="初级"></a>初级</h3><h4 id="工作流"><a href="#工作流" class="headerlink" title="工作流"></a>工作流</h4><p><img src="git.jpg" class="lazyload" data-srcset="git.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="工作流"></p><p>working directory是操作目录<br>staging area是暂存区，用来保存变化<br>repository是仓库，保存作为一个版本的变化</p><h4 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h4><p>git init<br>git status<br>git diff<br>git log<br>git reflog<br>git add [. | filenames]<br>git commit -m “message &lt;=50 characters”</p><h4 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h4><p>HEAD:当前所在版本<br>HEAD^:上一个版本<br>HEAD~n:上n个版本<br>SHA：40 characters 唯一标识取至少7位</p><h3 id="中级"><a href="#中级" class="headerlink" title="中级"></a>中级</h3><h4 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h4><p>git branch 当前分支<br>git branch new_branch 新建分支<br>git checkout branch_name 切换分支<br>git merge branch_name(提供者分支名称) 合并到当前分支<br>git branch -d branch_name 删除分支<br>注：若有冲突conflict，需要手动修改，再add、 commit</p><h4 id="teamwork"><a href="#teamwork" class="headerlink" title="teamwork"></a>teamwork</h4><p>git clone remote_location(from) clone_name(to)克隆远端的仓库到本地<br>git remote -v 查看远端仓库的版本信息<br>git fetch 查看远端修改（这个操作只是合并到了本地的origin/master,不是本地的local/master）<br>git push your_branch_name 上传到远端<br>注：<br>origin/master 标志远端HEAD的位置<br>git fetch区别于git pull：fetch不会自动merge，pull会自动merge。fetch更安全<br>使用Github需要先fork到自己的账号下，再从自己的账号下clone，才可以提交修改</p><h4 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h4><p>一般的使用git来做版本控制的工作流程如下：<br>①fetch and merge （=pull）<br>②创建新分支来开发新的功能<br>③开发、commit<br>④fetch and merge<br>⑤push your branch to remote</p><h3 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h3><h4 id="reset和checkout"><a href="#reset和checkout" class="headerlink" title="reset和checkout"></a>reset和checkout</h4><p>这是与回退相关的两个常用命令，到底什么时候该用哪个命令，具体用法和区别如下：</p><p>reset命令一般用于版本回退：注意不只是可以做仓库的版本回退。使用如下：<br>命令格式：git reset [- -参数] [commit-id] [filename]<br>hard：HEAD INDEX WORKING都改变<br>mixed：HEAD INDEX改变（默认）<br>soft: HEAD改变<br>加文件名代表只有该文件做回退，不加代表所有文件均回退</p><p>checkout有两个作用：切换分支和撤销修改（指修改工作区，仓库的版本都还存在）<br>撤销修改：<br>①git checkout - -[.|filename]<br>若add过，回到add之后的状态。若没有add过，回到上一次commit<br>②工作区内容回到上一次或者上n次的版本<br>git checkout commit-id filename 或者 先reset在checkout - -</p><p>两种方式的对比：<br>前者容易误操作，但是保留了该文件工作区目标版本之后的几个版本。后者不容易误操作，但是几个版本会丢失。</p><p>关于前者的误操作和解决方式：<br>filename是必须加的，若不加，该命令将使HEAD指针不再指向最新的版本，而是处于游离状态。解决方法是：checkout到master分支，但若目前已有修改无法切换到master分支。则新建temp分支，commit再合并到master分支，然后删除temp分支。可以将HEAD指针回到最新版本的位置。</p><h4 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h4><p>当前分支工作未完成，不能commit，但是要切换到其他分支去工作。问题是：不commit修改无法切换到其他分支。因此要用到stash。<br>git stash 备份<br>git stash pop 读取并恢复（pop命令之后不再有，apply之后还有）<br>git stash list<br>git stash clear 清空<br>git stash apply [stash @{1}]<br>git stash drop [&lt; stash &gt;]删除某进度，默认最新<br>注：不能保存untracked files，需要加-u参数</p><h4 id="github的使用（摘了网上的）"><a href="#github的使用（摘了网上的）" class="headerlink" title="github的使用（摘了网上的）"></a>github的使用（摘了网上的）</h4><p>配置Git</p><p>首先在本地创建ssh key；<br>ssh-keygen -t rsa -C “<a href="mailto:&#x79;&#x6f;&#x75;&#114;&#95;&#101;&#x6d;&#97;&#105;&#108;&#x40;&#x79;&#x6f;&#x75;&#x72;&#x65;&#109;&#97;&#105;&#x6c;&#x2e;&#x63;&#111;&#109;">&#x79;&#x6f;&#x75;&#114;&#95;&#101;&#x6d;&#97;&#105;&#108;&#x40;&#x79;&#x6f;&#x75;&#x72;&#x65;&#109;&#97;&#105;&#x6c;&#x2e;&#x63;&#111;&#109;</a>”<br>后面的<a href="mailto:&#121;&#x6f;&#x75;&#114;&#x5f;&#101;&#109;&#x61;&#105;&#x6c;&#x40;&#x79;&#111;&#x75;&#114;&#x65;&#x6d;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#121;&#x6f;&#x75;&#114;&#x5f;&#101;&#109;&#x61;&#105;&#x6c;&#x40;&#x79;&#111;&#x75;&#114;&#x65;&#x6d;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a>改为你在github上注册的邮箱，之后会要求确认路径和输入密码，我们这使用默认的一路回车就行。成功的话会在~/下生成.ssh文件夹，进去，打开id_rsa.pub，复制里面的key。<br>回到github上，进入 Account Settings（账户配置），左边选择SSH Keys，Add SSH Key,title随便填，粘贴在你电脑上生成的key。<br>github-account<br>为了验证是否成功，在git bash下输入：<br>ssh -T <a href="mailto:&#103;&#105;&#116;&#64;&#x67;&#x69;&#x74;&#104;&#117;&#x62;&#x2e;&#x63;&#111;&#x6d;">&#103;&#105;&#116;&#64;&#x67;&#x69;&#x74;&#104;&#117;&#x62;&#x2e;&#x63;&#111;&#x6d;</a><br>如果是第一次的会提示是否continue，输入yes就会看到：You’ve successfully authenticated, but GitHub does not provide shell access 。这就表示已成功连上github。</p><p>把本地仓库传到github上去，在此之前还需要设置username和email，因为github每次commit都会记录他们。<br>git config –global user.name “your name”<br>git config –global user.email “<a href="mailto:&#x79;&#x6f;&#117;&#114;&#95;&#101;&#109;&#97;&#x69;&#108;&#x40;&#121;&#x6f;&#117;&#114;&#x65;&#x6d;&#97;&#105;&#x6c;&#x2e;&#x63;&#111;&#x6d;">&#x79;&#x6f;&#117;&#114;&#95;&#101;&#109;&#97;&#x69;&#108;&#x40;&#121;&#x6f;&#117;&#114;&#x65;&#x6d;&#97;&#105;&#x6c;&#x2e;&#x63;&#111;&#x6d;</a>”<br>进入要上传的仓库，右键git bash，添加远程地址：<br>git remote add origin <a href="mailto:&#x67;&#105;&#116;&#x40;&#103;&#x69;&#116;&#x68;&#x75;&#x62;&#x2e;&#99;&#111;&#109;">&#x67;&#105;&#116;&#x40;&#103;&#x69;&#116;&#x68;&#x75;&#x62;&#x2e;&#99;&#111;&#109;</a>:yourName/yourRepo.git<br>后面的yourName和yourRepo表示你再github的用户名和刚才新建的仓库，加完之后进入.git，打开config，这里会多出一个remote “origin”内容，这就是刚才添加的远程地址，也可以直接修改config来配置远程地址。</p><p>创建新文件夹，打开，然后执行 git init 以创建新的 git 仓库。<br>检出仓库<br>执行如下命令以创建一个本地仓库的克隆版本：<br>git clone /path/to/repository<br>如果是远端服务器上的仓库，你的命令会是这个样子：<br>git clone username@host:/path/to/repository</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开源协议</title>
      <link href="/2021/10/22/other-OpenSourceLicense/"/>
      <url>/2021/10/22/other-OpenSourceLicense/</url>
      
        <content type="html"><![CDATA[<h3 id="开源协议"><a href="#开源协议" class="headerlink" title="开源协议"></a>开源协议</h3><p>常见的开源协议有GPL、BSD、MIT、Mozilla、Apache和LGPL等。</p><span id="more"></span><h4 id="概述总结"><a href="#概述总结" class="headerlink" title="概述总结"></a>概述总结</h4><div class="note "><p>按照限制由少到多排序：MIT BSD Apache LGPL Mozilla GPL</p></div><p><img src="img.png" class="lazyload" data-srcset="img.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="协议图示"> </p><h4 id="协议详情"><a href="#协议详情" class="headerlink" title="协议详情"></a>协议详情</h4><p class='p center logo'>MIT</p><p>源自麻省理工学院（Massachusetts Institute of Technology, MIT），又称X11协议，目前最少限制的协议。唯一的条件就是在修改后的代码或者发行包包含原作者的许可信息。适用商业软件。使用MIT的软件项目有：jquery、Node.js。</p><p class='p center logo'>BSD</p><p>BSD是”Berkeley Software Distribution”的缩写，意思是”伯克利软件发行版”。<br>可以自由的使用，修改源代码，也可以将修改后的代码作为开源或者专有软件再发布。 发布使用了BSD协议的代码，或则以BSD协议代码为基础做二次开发自己的产品时，需要满足三个条件：<br>    - 如果再发布的产品中包含源代码，则在源代码中必须带有原来代码中的BSD协议。<br>    - 如果再发布的只是二进制类库/软件，则需要在类库/软件的文档和版权声明中包含原来代码中的BSD协议。<br>    - 不可以用开源代码的作者/机构名字和原来产品的名字做市场推广。</p><p class='p center logo'>Apache</p><p>Apache Licence是著名的非盈利开源组织Apache采用的协议。该协议和BSD类似，同样鼓励代码共享和最终原作者的著作权，同样允许源代码修改和再发布。但是也需要遵循以下条件：<br>    - 需要给代码的用户一份Apache Licence。<br>    - 如果修改了代码，需要再被修改的文件中说明。<br>    - 在衍生的代码中（修改和有源代码衍生的代码中）需要带有原来代码中的协议，商标，专利声明和其他原来作者规定需要包含的说明。<br>    - 如果再发布的产品中包含一个Notice文件，则在Notice文件中需要带有Apache Licence。你可以再Notice中增加自己的许可，但是不可以表现为对Apache Licence构成更改。<br>Apache Licence也是对商业应用友好的许可。使用者也可以再需要的时候修改代码来满足并作为开源或商业产品发布/销售。<br>使用这个协议的好处是:<br>    - 永久权利 一旦被授权，永久拥有。<br>    - 全球范围的权利 在一个国家获得授权，适用于所有国家。假如你在美国，许可是从印度授权的，也没有问题。<br>    - 授权免费 无版税， 前期、后期均无任何费用。<br>    - 授权无排他性 任何人都可以获得授权<br>    - 授权不可撤消 一旦获得授权，没有任何人可以取消。比如，你基于该产品代码开发了衍生产品，你不用担心会在某一天被禁止使用该代码</p><p class='p center logo'>LGPL</p><p>LGPL是GPL的一个为主要为类库使用设计的开源协议。和GPL要求任何使用/修改/衍生之GPL类库的的软件必须采用GPL协议不同。LGPL允许商业软件通过类库引用(link)方式使用LGPL类库而不需要开源商业软件的代码。这使得采用LGPL协议的开源代码可以被商业软件作为类库引用并发布和销售。<br>但是如果修改LGPL协议的代码或者衍生，则所有修改的代码，涉及修改部分的额外代码和衍生的代码都必须采用LGPL协议。因此LGPL协议的开源代码很适合作为第三方类库被商业软件引用，但不适合希望以LGPL协议代码为基础，通过修改和衍生的方式做二次开发的商业软件采用。<br>GPL/LGPL都保障原作者的知识产权，避免有人利用开源代码复制并开发类似的产品。</p><p class='p center logo'>Mozilla</p><p>(Mozilla Public License 1.1)<br>MPL协议允许免费重发布、免费修改，但要求修改后的代码版权归软件的发起者 。这种授权维护了商业软件的利益，它要求基于这种软件的修改无偿贡献版权给该软件。这样，围绕该软件的所有代码的版权都集中在发起开发人的手中。但MPL是允许修改，无偿使用得。MPL软件对链接没有要求。</p><p class='p center logo'>GPL</p><p>GPL （GNU General Public License） ：GNU通用公共许可协议。<br>Linux 采用了 GPL。<br>GPL的出发点是代码的开源/免费使用和引用/修改/衍生代码的开源/免费使用，但不允许修改后和衍生的代码做为闭源的商业软件发布和销售。这也就是为什么我们能用免费的各种linux，包括商业公司的linux和linux上各种各样的由个人，组织，以及商业软件公司开发的免费软件了。</p>]]></content>
      
      
      <categories>
          
          <category> other </category>
          
      </categories>
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-echarts</title>
      <link href="/2021/10/21/react-echarts/"/>
      <url>/2021/10/21/react-echarts/</url>
      
        <content type="html"><![CDATA[<h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p>从官网导出主题js文件，将主题配置用export default{}封装，在页面代码中引入</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">import echarts from &#x27;echarts/lib/echarts&#x27;;</span><br><span class="line">import ReactEcharts from &quot;echarts-for-react&quot;;</span><br><span class="line">import echartsTheme from &#x27;../../theme/tabletheme1&#x27;;</span><br><span class="line"></span><br><span class="line">class EchartsTest extends Component&#123;</span><br><span class="line"></span><br><span class="line">componentWillMount()&#123;</span><br><span class="line">//注册意图</span><br><span class="line">echarts.registerTheme(&#x27;theme&#x27;, echartsTheme);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getOption = () =&gt; &#123;</span><br><span class="line">        let option = &#123;</span><br><span class="line">            toolbox:&#123;</span><br><span class="line">                feature:&#123;</span><br><span class="line">                    saveAsImage:&#123;</span><br><span class="line">                        name:&quot;test&quot; + Date.parse(new Date()),</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            title: &#123;</span><br><span class="line">                text: &#x27;test&#x27;,</span><br><span class="line">                subtext: &#x27;test&#x27;,</span><br><span class="line">                left: &#x27;center&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            legend: &#123;</span><br><span class="line">                orient: &#x27;vertical&#x27;,</span><br><span class="line">                left: &#x27;left&#x27;,</span><br><span class="line">                data: [&#x27;data1&#x27;, &#x27;data2&#x27;]</span><br><span class="line">            &#125;,</span><br><span class="line">            series: [&#123;</span><br><span class="line">                name: &#x27;test&#x27;,</span><br><span class="line">                type: &#x27;pie&#x27;,</span><br><span class="line">                radius: &#x27;55%&#x27;,</span><br><span class="line">                center: [&#x27;50%&#x27;, &#x27;50%&#x27;],</span><br><span class="line">                label: &#123;</span><br><span class="line">                    normal: &#123;</span><br><span class="line">                        show: true,</span><br><span class="line">                        formatter: &#x27;&#123;b&#125;: &#123;c&#125;(&#123;d&#125;%)&#x27;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                data: this.state.callNum,</span><br><span class="line">                emphasis: &#123;</span><br><span class="line">                    itemStyle: &#123;</span><br><span class="line">                        shadowBlur: 10,</span><br><span class="line">                        shadowOffsetX: 0,</span><br><span class="line">                        shadowColor: &#x27;rgba(0, 0, 0, 0.5)&#x27;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;],</span><br><span class="line"></span><br><span class="line">            tooltip:&#123;</span><br><span class="line">                show: true,</span><br><span class="line">                trigger: &#x27;item&#x27;,</span><br><span class="line">                formatter: &#x27;&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span><br><span class="line">                //formatter: &quot;&#123;a0&#125; &lt;br/&gt; &#123;b&#125; : &#123;c0&#125; &lt;br/&gt; &#123;a1&#125; &lt;br/&gt; &#123;c1&#125;%&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return option;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return(</span><br><span class="line">&lt;ReactEcharts option=&#123;this.getOption()&#125;</span><br><span class="line">                                          style=&#123;&#123;height: 400&#125;&#125;</span><br><span class="line">                                          theme=&quot;theme&quot;&gt;&lt;/ReactEcharts&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default EchartsTest;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2021/10/21/hello-world/"/>
      <url>/2021/10/21/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><div class="story post-story"><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p></div>]]></content>
      
      
      <categories>
          
          <category> Hello </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hello </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
